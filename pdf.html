<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <title>{{title}}</title>
  <style>
    body {
      font-family: Verdana, Geneva, Tahoma, sans-serif;
      margin: 0;
      padding: 10px;
      background: #f5f5f5;
      color: #3a3a3a;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 100%;
      margin: auto;
    }
    .title {
      text-align: center;
      margin-bottom: 10px;
    }
    .title h1 {
      margin: 0;
      font-size: 24px;
    }
    .title p {
      margin: 5px 0;
      font-size: 14px;
      color: gray;
    }

    .d-info-grid {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      background: #fafafa;
      border: 1px solid #eee;
      border-radius: 5px;
      margin-bottom: 20px;
      box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
    }

    .info-box {
      font-size: 14px;
      background: #fafafa;
      padding: 10px 15px;
      border-radius: 8px;
      margin: 5px 0;
    }

    .info-box i {
      margin-right: 5px;
      font-size: 14px;
    }

    .section-title {
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 14px;
      border-left: 4px solid #2ecc71;
      padding-left: 10px;
    }

    .flex-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }

    .card {
      background: #fdfdfd;
      border: 1px solid #eee;
      border-radius: 10px;
      width: 45%;
      margin-bottom: 15px;
      padding: 15px;
      box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
    }

    .highlight-red { color: red; font-weight: bold; }
    .highlight-orange { color: orange; font-weight: bold; }
    .highlight-green { color: green; font-weight: bold; }
    .highlight-blue { color: #3498db; font-weight: bold; }
    .chart-placeholder {
      width: 100%;
      height: 180px;
      background: #efefef;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      color: gray;
      font-size: 12px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    td, th {
      padding: 6px 8px;
      border: 2px solid #fff;
      background-color: #eaeaea;
      margin: 2px;
      border-radius: 5px;
      max-width: 50px;
      white-space: nowrap; /* Prevent text from wrapping */
      overflow: hidden; /* Hide overflow if the text is too long */
      text-overflow: ellipsis; /* Add ellipsis (...) if the text overflows */
    }

    th{
      color: #656565;
    }

    .footer {
      text-align: center;
      margin-top: 20px;
      font-size: 12px;
      color: gray;
    }

    .qrcode {
      margin-top: 10px;
      text-align: center;
    }

    .qrcode img {
      width: 80px;
    }

    .matrix-chart {
      display: grid;
      grid-template-rows: repeat(3, 0.5fr);
      grid-gap: 2px;
      margin-top: 10px;
    }

    .row {
      display: flex;
    }

    .cell {
      flex: 1;
      text-align: center;
      padding: 10px;
      border: 1px solid #ddd;
      background-color: #f9f9f9;
      font-size: 12px;
      border-radius: 5px;
      margin: 5px;
    }

    .cell.highlighted {
      background-color: #2ecc71;
      color: white;
      font-weight: bold;
    }

    .body-composition{
      display: flex;
      flex-direction: row;

    }

    .Low,
    .Underweight {
      background-color: #ffee51; /* Soft pastel yellow */
      color: #fff; /* Darker text for better readability */
      font-weight: bold;
    }
    
    .Standard,
    .Normal {
      background-color: #6aff62; /* Soft pastel green */
      color: #555; /* Darker text for better readability */
      font-weight: bold;
    }
    
    .High,
    .Overweight {
      background-color: #ff4a4a; /* Soft pastel orange */
      color: #fff; /* Darker text for better readability */
      font-weight: bold;
    }
    
    .At.Risk {
      background-color: #ff1717; /* Soft pastel red */
      color: #fff; /* Darker text for better readability */
      font-weight: bold;
    }

    .weight{
      text-align: left;
      justify-content: center;
      padding: 10px;
      height: 40px;
      position: relative;
      border: none;
      background-color: #fdfdfd;
    }

    .weight strong{
      font-size: 20px;
      margin-bottom: 15px;
    }

    .weight small{
      font-size: 12px;
      margin-left: 10px;
      position: absolute;
      top: 10px;
    }

    .weight-category{
      position: absolute;
      top: -10px;
      left: 120px;
      padding: 10px 20px;   
      
    }

    .compared-to-last{
      position: absolute;
      top: 35px;
      left: 120px;
    }

    .tables {
      width: 100%;
      display: flex;
      flex-direction: row;
      gap: 10px; /* Add spacing between tables */
    }

    .table1,
    .table2 {
      width: 50%; /* Each table takes up half the width */
      table-layout: fixed; /* Ensure consistent column widths */
    }

    .table1 th,
    .table2 th,
    .table1 td,
    .table2 td {
      word-wrap: break-word; /* Prevent text overflow */
      text-align: left; /* Align text to the left */
    }

    .table1 th:nth-child(1),
    .table2 th:nth-child(1),
    .table1 td:nth-child(1),
    .table2 td:nth-child(1) {
      width: 30%; /* Set width for the first column */
    }

    .table1 th:nth-child(2),
    .table2 th:nth-child(2),
    .table1 td:nth-child(2),
    .table2 td:nth-child(2) {
      width: 40%; /* Set width for the second column */
    }

    .table1 th:nth-child(3),
    .table2 th:nth-child(3),
    .table1 td:nth-child(3),
    .table2 td:nth-child(3) {
      width: 30%; /* Set width for the third column */
    }
    

    .image {
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden; /* Crop any excess space */
      width: 50%; /* Ensure the container spans the full width */
      max-width: 300px; /* Optional: Set a maximum width */
      margin: 0 auto; /* Center the container */
    }
    
    .image img {
      width: 100%; /* Make the image fill the container */
      height: 100%; /* Maintain aspect ratio */
      object-fit: cover; /* Eliminate empty space by cropping */
      border-radius: 10px; /* Optional: Add rounded corners */
    }

  </style>
</head>
<body>
  <div class="container">
    <div class="title">
      <h1>{{title}}</h1>
      <p>{{reportDate}}</p>
    </div>

    <div class="d-info-grid">
      <div class="info-box"><strong><i class="bi bi-person-circle"></i>Name:</strong> {{customerData.name}}</div>
      <div class="info-box"><strong>Gender:</strong> {{customerData.gender}}</div>
      <div class="info-box"><strong>Height:</strong> {{customerData.height}} cm</div>
      <div class="info-box"><strong>Age:</strong> {{customerData.age}}</div>
    </div>

    <div class="flex-grid">
      <!-- Card 1: Basic Data -->
      <div class="card">
        <div class="section-title">Basic Data</div>
        <div class="row">
          <div class="weight cell">
            <strong>{{weight}}</strong><small>kg</small>
            <span class="weight-category {{weightCategory}}">{{weightCategory}}</span>
            <div class="compared-to-last">
              <i class="bi bi-arrow-{{weightChangeDirection}}"></i>
              <!-- <span>{{weightChange}}</span> -->
              <span>{{weightChangeText}}</span>
            </div>
          </div>
        </div>
        <hr>
        <table>
          <tr>
            <td><strong>BMI</strong></td>
            <td>{{bmiValue}}</td>
            <td class="{{bmiClass}}">{{bmiStatus}}</td>
          </tr>
          <tr>
            <td><strong>Body Fat %</strong></td>
            <td>{{bodyFatValue}}</td>
            <td class="{{bodyFatClass}}">{{bodyFatStatus}}</td> 
          </tr>
          <tr>
            <td><strong>Muscle Rate</strong></td>
            <td>{{muscleMassValue}}</td>
            <td class="{{muscleMassClass}}">{{muscleMassStatus}}</td>
          </tr>
        </table>
      </div>

      <!-- Card 2: Body Composition -->
      <div class="body-comp-card card">
        <div class="section-title">Body Composition</div>
        <div class="body-composition">
          <div class="image">
            <img src="{{humanBodyImageUri}}" alt="Body Composition Image" />
          </div>
          <table>
            <tr>
              <td>Fat Mass</td>
              <td>{{bodyFatValue}}</td>
              <td class="{{bodyFatStatus}}">{{bodyFatStatus}}</td>
            </tr>
            <tr>
              <td>Subcutaneous Fat</td>
              <td>{{subcutaneousFatValue}}</td>
              <td class="{{subcutaneousFatStatus}}">{{subcutaneousFatStatus}}</td>
            </tr>
            <tr>
              <td>Muscle Mass</td>
              <td>{{muscleMassValue}}</td>
              <td class="{{muscleMassStatus}}">{{muscleMassStatus}}</td>
            </tr>
            <tr>
              <td>Bone Mass</td>
              <td>{{boneMassValue}}</td>
              <td class="{{boneMassStatus}}">{{boneMassStatus}}</td>
            </tr>
          </table>
        </div>
      </div>

      <!-- Card 3: Weight Control -->
      <div class="card">
        <div class="section-title">Weight Control</div>
        <table>
          <tr>
            <th>Index</th>
            <th>Measurements</th>
          </tr>
          <tr>
            <td>Current Weight</td>
            <td>{{weight}}</td>
          </tr>
          <tr>
            <td>Standard Weight</td>
            <td>{{idealWeight}}</td>
          </tr>
          <tr>
            <td>Muscle Mass</td>
            <td>{{muscleMassValue}}</td>
          </tr>
          <tr>
            <td>Weight Difference</td>
            <td>{{weightChange}}</td>
          </tr>
        </table>
      </div>

      <!-- Card 4: Body Type -->
      <div class="card">
        <div class="section-title">Body Type</div>
        <div class="matrix-chart">
          <div class="row">
            <div class="cell {{bodyType.row1.cell1Class}}">Recessive obesity</div>
            <div class="cell {{bodyType.row1.cell2Class}}">Overweight</div>
            <div class="cell {{bodyType.row1.cell3Class}}">Muscular Overweight</div>
          </div>
          <div class="row">
            <div class="cell {{bodyType.row2.cell1Class}}">Lack of exercise</div>
            <div class="cell {{bodyType.row2.cell2Class}}">Standard</div>
            <div class="cell {{bodyType.row2.cell3Class}}">Standard muscular</div>
          </div>
          <div class="row">
            <div class="cell {{bodyType.row3.cell1Class}}">Thin</div>
            <div class="cell {{bodyType.row3.cell2Class}}">Thin & muscular</div>
            <div class="cell {{bodyType.row3.cell3Class}}">Strong & muscular</div>
          </div>
        </div>
      </div>

      <!-- Card 5: Other Indicators -->
      <div class="card" style="width: 100%;">
        <div class="section-title">Other Indicators</div>
        <div class="flex-grid">
          <!-- Table 1 -->
           <div class="tables">
          <table class="table1">
            <tr>
              <th>Index</th>
              <th>Measurements</th>
              <th>Reference</th>
            </tr>
            <tr>
              <td>Resting Metabolism</td>
              <td>{{restingMetabolismValue}}</td>
              <td>{{restingMetabolismRange}}</td>
            </tr>
            <tr>
              <td>Visceral Fat</td>
              <td>{{visceralFatValue}}</td>
              <td>{{visceralFatRange}}</td>
            </tr>
            <tr>
              <td>Subcutaneous Fat</td>
              <td>{{subcutaneousFatValue}}</td>
              <td>{{subcutaneousFatRange}}</td>
            </tr>
          </table>
      
          <!-- Table 2 -->
          <table class="table2">
            <tr>
              <th>Index</th>
              <th>Measurements</th>
              <th>Reference</th>
            </tr>
            <tr>
              <td>Body Age</td>
              <td>{{bodyAgeValue}}</td>
              <td>{{bodyAgeRange}}</td>
            </tr>
            <tr>
              <td>Obesity Rating</td>
              <td>{{obesityRating}}</td>
              <td>{{obesityRatingRange}}</td>
            </tr>
            <tr>
              <td>Protein Rate</td>
              <td>{{proteinRateValue}}</td>
              <td>{{proteinRateRange}}</td>
            </tr>
          </table>
        </div>
        </div>
      </div>
    </div>

    <div class="footer">
      {{footerText}}
    </div>

    <div class="qrcode">
      <img src="{{qrCodeUrl}}" alt="QR Code" />
    </div>
  </div>
</body>
</html>